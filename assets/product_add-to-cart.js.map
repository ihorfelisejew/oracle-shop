{"version":3,"file":"product_add-to-cart.js","names":["document","addEventListener","decreaseBtn","querySelector","increaseBtn","quantityInput","getElementById","currentValue","parseInt","value","addToCartBtn","variantId","quantity","fetch","method","headers","body","JSON","stringify","id","then","res","json","sectionId","response","sections","tempDiv","createElement","innerHTML","newCartDrawer","cartWrapper","appendChild","classList","add","newItemCount","textContent","match","cartButton","countEl","error","console","alert"],"sources":["product_add-to-cart.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n\tconst decreaseBtn = document.querySelector(\".decrease__button\");\n\tconst increaseBtn = document.querySelector(\".increase__button\");\n\tconst quantityInput = document.getElementById(\"quantity\");\n\n\tif (decreaseBtn) {\n\t\tdecreaseBtn.addEventListener(\"click\", () => {\n\t\t\tlet currentValue = parseInt(quantityInput.value) || 1;\n\t\t\tif (currentValue > 1) {\n\t\t\t\tquantityInput.value = currentValue - 1;\n\t\t\t}\n\t\t});\n\n\t\tincreaseBtn.addEventListener(\"click\", () => {\n\t\t\tlet currentValue = parseInt(quantityInput.value) || 1;\n\t\t\tquantityInput.value = currentValue + 1;\n\t\t});\n\t}\n\n\tconst addToCartBtn = document.getElementById(\"add-to-cart\");\n\tif (addToCartBtn) {\n\t\taddToCartBtn.addEventListener(\"click\", async function () {\n\t\t\tconst variantId =\n\t\t\t\tdocument.getElementById(\"product-variant\")?.value ||\n\t\t\t\t\"{{ product.selected_or_first_available_variant.id }}\";\n\t\t\tconst quantity =\n\t\t\t\tparseInt(document.getElementById(\"quantity\").value) || 1;\n\n\t\t\ttry {\n\t\t\t\t// Додаємо товар до корзини\n\t\t\t\tawait fetch(\"/cart/add.js\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({ id: variantId, quantity }),\n\t\t\t\t}).then((res) => res.json());\n\n\t\t\t\tconst sectionId = \"cart-drawer\";\n\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(\n\t\t\t\t\t\t`/?sections=${sectionId}&sections_url=true`\n\t\t\t\t\t);\n\t\t\t\t\tconst sections = await response.json();\n\n\t\t\t\t\tif (sections[sectionId]) {\n\t\t\t\t\t\tconst tempDiv = document.createElement(\"div\");\n\t\t\t\t\t\ttempDiv.innerHTML = sections[sectionId];\n\n\t\t\t\t\t\tconst newCartDrawer =\n\t\t\t\t\t\t\ttempDiv.querySelector(\"#cart-drawer\");\n\t\t\t\t\t\tif (newCartDrawer) {\n\t\t\t\t\t\t\tconst cartWrapper =\n\t\t\t\t\t\t\t\tdocument.getElementById(\"cart-wrapper\");\n\t\t\t\t\t\t\tcartWrapper.innerHTML = \"\";\n\t\t\t\t\t\t\tcartWrapper.appendChild(newCartDrawer);\n\t\t\t\t\t\t\tcartWrapper.classList.add(\"open\");\n\n\t\t\t\t\t\t\tconst newItemCount =\n\t\t\t\t\t\t\t\tnewCartDrawer\n\t\t\t\t\t\t\t\t\t.querySelector(\".cart__title\")\n\t\t\t\t\t\t\t\t\t?.textContent.match(/\\((\\d+)\\)/)?.[1] || 0;\n\n\t\t\t\t\t\t\tconst cartButton =\n\t\t\t\t\t\t\t\tdocument.querySelector(\".cart__button\");\n\t\t\t\t\t\t\tif (cartButton) {\n\t\t\t\t\t\t\t\tconst countEl =\n\t\t\t\t\t\t\t\t\tcartButton.querySelector(\".count\");\n\t\t\t\t\t\t\t\tif (countEl)\n\t\t\t\t\t\t\t\t\tcountEl.textContent = `(${newItemCount})`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(\"Error updating cart drawer:\", error);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Error:\", error);\n\t\t\t\talert(\"Error adding product to cart\");\n\t\t\t}\n\t\t});\n\t}\n});\n"],"mappings":"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","ignoreList":[]}