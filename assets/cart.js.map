{"version":3,"file":"cart.js","names":["document","addEventListener","e","cartWrapper","querySelector","target","classList","contains","line","dataset","input","quantity","parseInt","value","updateCart","closest","remove","fetch","method","headers","body","JSON","stringify","then","res","json","sectionId","response","sections","tempDiv","createElement","innerHTML","newCartDrawer","getElementById","appendChild","add","newItemCount","textContent","match","cartButton","countEl","error","console"],"sources":["cart.js"],"sourcesContent":["document.addEventListener(\"click\", function (e) {\n\tconst cartWrapper = document.querySelector(\".cart-wrapper\");\n\n\tif (e.target.classList.contains(\"qty-btn\")) {\n\t\tconst line = e.target.dataset.line;\n\t\tconst input = document.querySelector(`input[data-line=\"${line}\"]`);\n\t\tlet quantity = parseInt(input.value);\n\n\t\tif (e.target.classList.contains(\"plus\")) {\n\t\t\tquantity++;\n\t\t} else if (e.target.classList.contains(\"minus\")) {\n\t\t\tquantity--;\n\t\t\tif (quantity < 1) quantity = 0;\n\t\t}\n\n\t\tupdateCart(line, quantity);\n\t}\n\n\tif (e.target.closest(\".cart-item__remove\")) {\n\t\tconst line = e.target.closest(\".cart-item__remove\").dataset.line;\n\t\tupdateCart(line, 0);\n\t}\n\n\tif (e.target.closest(\".cart-drawer__close\")) {\n\t\tcartWrapper.classList.remove(\"open\");\n\t}\n});\n\nasync function updateCart(line, quantity) {\n\ttry {\n\t\tawait fetch(\"/cart/change.js\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify({ line, quantity }),\n\t\t}).then((res) => res.json());\n\n\t\tconst sectionId = \"cart-drawer\";\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\t`/?sections=${sectionId}&sections_url=true`\n\t\t\t);\n\t\t\tconst sections = await response.json();\n\n\t\t\tif (sections[sectionId]) {\n\t\t\t\tconst tempDiv = document.createElement(\"div\");\n\t\t\t\ttempDiv.innerHTML = sections[sectionId];\n\n\t\t\t\tconst newCartDrawer = tempDiv.querySelector(\"#cart-drawer\");\n\t\t\t\tif (newCartDrawer) {\n\t\t\t\t\tconst cartWrapper = document.getElementById(\"cart-wrapper\");\n\t\t\t\t\tcartWrapper.innerHTML = \"\";\n\t\t\t\t\tcartWrapper.appendChild(newCartDrawer);\n\t\t\t\t\tcartWrapper.classList.add(\"open\");\n\n\t\t\t\t\tconst newItemCount =\n\t\t\t\t\t\tnewCartDrawer\n\t\t\t\t\t\t\t.querySelector(\".cart__title\")\n\t\t\t\t\t\t\t?.textContent.match(/\\((\\d+)\\)/)?.[1] || 0;\n\n\t\t\t\t\tconst cartButton = document.querySelector(\".cart__button\");\n\t\t\t\t\tif (cartButton) {\n\t\t\t\t\t\tconst countEl = cartButton.querySelector(\".count\");\n\t\t\t\t\t\tif (countEl) countEl.textContent = `(${newItemCount})`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error updating cart drawer:\", error);\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Error updating cart:\", error);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}