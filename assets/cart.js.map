{"version":3,"file":"cart.js","names":["document","addEventListener","e","cartWrapper","querySelector","target","classList","contains","line","dataset","input","quantity","parseInt","value","updateCart","closest","remove","fetch","method","headers","body","JSON","stringify","then","res","json","sectionId","response","sections","getElementById","innerHTML","add","newCartDrawer","newItemCount","textContent","match","cartButton","error","console"],"sources":["cart.js"],"sourcesContent":["document.addEventListener(\"click\", function (e) {\n\tconst cartWrapper = document.querySelector(\".cart-wrapper\");\n\n\tif (e.target.classList.contains(\"qty-btn\")) {\n\t\tconst line = e.target.dataset.line;\n\t\tconst input = document.querySelector(`input[data-line=\"${line}\"]`);\n\t\tlet quantity = parseInt(input.value);\n\n\t\tif (e.target.classList.contains(\"plus\")) {\n\t\t\tquantity++;\n\t\t} else if (e.target.classList.contains(\"minus\")) {\n\t\t\tquantity--;\n\t\t\tif (quantity < 1) quantity = 0;\n\t\t}\n\n\t\tupdateCart(line, quantity);\n\t}\n\n\tif (e.target.closest(\".cart-item__remove\")) {\n\t\tconst line = e.target.closest(\".cart-item__remove\").dataset.line;\n\t\tupdateCart(line, 0);\n\t}\n\n\tif (e.target.closest(\".cart-drawer__close\")) {\n\t\tcartWrapper.classList.remove(\"open\");\n\t}\n});\n\nasync function updateCart(line, quantity) {\n\ttry {\n\t\tawait fetch(\"/cart/change.js\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify({ line, quantity }),\n\t\t}).then((res) => res.json());\n\n\t\tconst sectionId = \"cart-drawer\";\n\t\tconst response = await fetch(\n\t\t\t`/?sections=${sectionId}&sections_url=true`\n\t\t);\n\t\tconst sections = await response.json();\n\n\t\tconst cartWrapper = document.getElementById(\"cart-wrapper\"); // шукаємо за id\n\t\tif (sections[sectionId]) {\n\t\t\tcartWrapper.innerHTML = sections[sectionId];\n\t\t\tcartWrapper.classList.add(\"open\");\n\n\t\t\tconst newCartDrawer = cartWrapper.querySelector(\"#cart-drawer\");\n\t\t\tconst newItemCount =\n\t\t\t\tnewCartDrawer\n\t\t\t\t\t.querySelector(\".cart__title\")\n\t\t\t\t\t?.textContent.match(/\\((\\d+)\\)/)?.[1] || 0;\n\n\t\t\tconst cartButton = document.querySelector(\".cart__button\");\n\t\t\tcartButton.querySelector(\n\t\t\t\t\".count\"\n\t\t\t).textContent = `(${newItemCount})`;\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Error updating cart:\", error);\n\t}\n}\n"],"mappings":"AAAAA,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAE,UAAUC,CAAC,EAAE;EAC/C,MAAMC,WAAW,GAAGH,QAAQ,CAACI,aAAa,CAAC,eAAe,CAAC;EAE3D,IAAIF,CAAC,CAACG,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,SAAS,CAAC,EAAE;IAC3C,MAAMC,IAAI,GAAGN,CAAC,CAACG,MAAM,CAACI,OAAO,CAACD,IAAI;IAClC,MAAME,KAAK,GAAGV,QAAQ,CAACI,aAAa,CAAE,oBAAmBI,IAAK,IAAG,CAAC;IAClE,IAAIG,QAAQ,GAAGC,QAAQ,CAACF,KAAK,CAACG,KAAK,CAAC;IAEpC,IAAIX,CAAC,CAACG,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,MAAM,CAAC,EAAE;MACxCI,QAAQ,EAAE;IACX,CAAC,MAAM,IAAIT,CAAC,CAACG,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAE;MAChDI,QAAQ,EAAE;MACV,IAAIA,QAAQ,GAAG,CAAC,EAAEA,QAAQ,GAAG,CAAC;IAC/B;IAEAG,UAAU,CAACN,IAAI,EAAEG,QAAQ,CAAC;EAC3B;EAEA,IAAIT,CAAC,CAACG,MAAM,CAACU,OAAO,CAAC,oBAAoB,CAAC,EAAE;IAC3C,MAAMP,IAAI,GAAGN,CAAC,CAACG,MAAM,CAACU,OAAO,CAAC,oBAAoB,CAAC,CAACN,OAAO,CAACD,IAAI;IAChEM,UAAU,CAACN,IAAI,EAAE,CAAC,CAAC;EACpB;EAEA,IAAIN,CAAC,CAACG,MAAM,CAACU,OAAO,CAAC,qBAAqB,CAAC,EAAE;IAC5CZ,WAAW,CAACG,SAAS,CAACU,MAAM,CAAC,MAAM,CAAC;EACrC;AACD,CAAC,CAAC;AAEF,eAAeF,UAAUA,CAACN,IAAI,EAAEG,QAAQ,EAAE;EACzC,IAAI;IACH,MAAMM,KAAK,CAAC,iBAAiB,EAAE;MAC9BC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEd,IAAI;QAAEG;MAAS,CAAC;IACxC,CAAC,CAAC,CAACY,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC;IAE5B,MAAMC,SAAS,GAAG,aAAa;IAC/B,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAC1B,cAAaS,SAAU,oBACzB,CAAC;IACD,MAAME,QAAQ,GAAG,MAAMD,QAAQ,CAACF,IAAI,CAAC,CAAC;IAEtC,MAAMtB,WAAW,GAAGH,QAAQ,CAAC6B,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;IAC7D,IAAID,QAAQ,CAACF,SAAS,CAAC,EAAE;MACxBvB,WAAW,CAAC2B,SAAS,GAAGF,QAAQ,CAACF,SAAS,CAAC;MAC3CvB,WAAW,CAACG,SAAS,CAACyB,GAAG,CAAC,MAAM,CAAC;MAEjC,MAAMC,aAAa,GAAG7B,WAAW,CAACC,aAAa,CAAC,cAAc,CAAC;MAC/D,MAAM6B,YAAY,GACjBD,aAAa,CACX5B,aAAa,CAAC,cAAc,CAAC,EAC5B8B,WAAW,CAACC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;MAE5C,MAAMC,UAAU,GAAGpC,QAAQ,CAACI,aAAa,CAAC,eAAe,CAAC;MAC1DgC,UAAU,CAAChC,aAAa,CACvB,QACD,CAAC,CAAC8B,WAAW,GAAI,IAAGD,YAAa,GAAE;IACpC;EACD,CAAC,CAAC,OAAOI,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;EAC7C;AACD","ignoreList":[]}