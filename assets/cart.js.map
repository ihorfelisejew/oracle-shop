{"version":3,"file":"cart.js","names":["document","addEventListener","e","target","classList","contains","line","dataset","input","querySelector","quantity","parseInt","value","updateCart","fetch","method","headers","body","JSON","stringify","then","res","json","sectionId","response","sections","cartWrapper","tempDiv","createElement","innerHTML","newCartDrawer","appendChild","add","error","console"],"sources":["cart.js"],"sourcesContent":["document.addEventListener(\"click\", function (e) {\n\tif (e.target.classList.contains(\"qty-btn\")) {\n\t\tconst line = e.target.dataset.line;\n\t\tconst input = document.querySelector(`input[data-line=\"${line}\"]`);\n\t\tlet quantity = parseInt(input.value);\n\n\t\tif (e.target.classList.contains(\"plus\")) {\n\t\t\tquantity++;\n\t\t} else if (e.target.classList.contains(\"minus\") && quantity > 1) {\n\t\t\tquantity--;\n\t\t}\n\n\t\tupdateCart(line, quantity);\n\t}\n\n\tif (e.target.classList.contains(\"cart-item__remove\")) {\n\t\tupdateCart(e.target.dataset.line, 0);\n\t}\n});\n\nasync function updateCart(line, quantity) {\n\ttry {\n\t\tawait fetch(\"/cart/change.js\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify({ line, quantity }),\n\t\t}).then((res) => res.json());\n\n\t\tconst sectionId = \"cart-drawer\";\n\t\tconst response = await fetch(\n\t\t\t`/?sections=${sectionId}&sections_url=true`\n\t\t);\n\t\tconst sections = await response.json();\n\n\t\tconst cartWrapper = document.querySelector(\".cart-wrapper\");\n\t\tif (sections[sectionId]) {\n\t\t\tconst tempDiv = document.createElement(\"div\");\n\t\t\ttempDiv.innerHTML = sections[sectionId];\n\t\t\tconst newCartDrawer = tempDiv.querySelector(\"#cart-drawer\");\n\n\t\t\tcartWrapper.innerHTML = \"\";\n\t\t\tcartWrapper.appendChild(newCartDrawer);\n\t\t\tcartWrapper.classList.add(\"open\");\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Error updating cart:\", error);\n\t}\n}\n"],"mappings":"AAAAA,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAE,UAAUC,CAAC,EAAE;EAC/C,IAAIA,CAAC,CAACC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,SAAS,CAAC,EAAE;IAC3C,MAAMC,IAAI,GAAGJ,CAAC,CAACC,MAAM,CAACI,OAAO,CAACD,IAAI;IAClC,MAAME,KAAK,GAAGR,QAAQ,CAACS,aAAa,CAAE,oBAAmBH,IAAK,IAAG,CAAC;IAClE,IAAII,QAAQ,GAAGC,QAAQ,CAACH,KAAK,CAACI,KAAK,CAAC;IAEpC,IAAIV,CAAC,CAACC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,MAAM,CAAC,EAAE;MACxCK,QAAQ,EAAE;IACX,CAAC,MAAM,IAAIR,CAAC,CAACC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,OAAO,CAAC,IAAIK,QAAQ,GAAG,CAAC,EAAE;MAChEA,QAAQ,EAAE;IACX;IAEAG,UAAU,CAACP,IAAI,EAAEI,QAAQ,CAAC;EAC3B;EAEA,IAAIR,CAAC,CAACC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,mBAAmB,CAAC,EAAE;IACrDQ,UAAU,CAACX,CAAC,CAACC,MAAM,CAACI,OAAO,CAACD,IAAI,EAAE,CAAC,CAAC;EACrC;AACD,CAAC,CAAC;AAEF,eAAeO,UAAUA,CAACP,IAAI,EAAEI,QAAQ,EAAE;EACzC,IAAI;IACH,MAAMI,KAAK,CAAC,iBAAiB,EAAE;MAC9BC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEb,IAAI;QAAEI;MAAS,CAAC;IACxC,CAAC,CAAC,CAACU,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC;IAE5B,MAAMC,SAAS,GAAG,aAAa;IAC/B,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAC1B,cAAaS,SAAU,oBACzB,CAAC;IACD,MAAME,QAAQ,GAAG,MAAMD,QAAQ,CAACF,IAAI,CAAC,CAAC;IAEtC,MAAMI,WAAW,GAAG1B,QAAQ,CAACS,aAAa,CAAC,eAAe,CAAC;IAC3D,IAAIgB,QAAQ,CAACF,SAAS,CAAC,EAAE;MACxB,MAAMI,OAAO,GAAG3B,QAAQ,CAAC4B,aAAa,CAAC,KAAK,CAAC;MAC7CD,OAAO,CAACE,SAAS,GAAGJ,QAAQ,CAACF,SAAS,CAAC;MACvC,MAAMO,aAAa,GAAGH,OAAO,CAAClB,aAAa,CAAC,cAAc,CAAC;MAE3DiB,WAAW,CAACG,SAAS,GAAG,EAAE;MAC1BH,WAAW,CAACK,WAAW,CAACD,aAAa,CAAC;MACtCJ,WAAW,CAACtB,SAAS,CAAC4B,GAAG,CAAC,MAAM,CAAC;IAClC;EACD,CAAC,CAAC,OAAOC,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;EAC7C;AACD","ignoreList":[]}